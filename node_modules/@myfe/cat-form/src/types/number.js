import React from 'react';
import PREFIX from '../prefix-name';
import {canSwitchNumber} from '../tools';

export default {

    renderEditor: function (value, changeHandler) {
        return (
            <input disabled={this.props.disabled}
                   placeholder={this.props.placeholder}
                   className={`${PREFIX}-form-control`}
                   onChange={changeHandler}
                   value={value}/>
        )
    },

    validate: function (value) {
        let tip = '', result = true;
        if (+value !== +value) {
            tip = '请输入数字';
            result = false;
        }
        if (this.props.whole && parseInt(value) !== +value) {
            tip = '请输入整数';
            result = false;
        }
        if (this.props.plus && +value <= 0) {
            tip = '请输入正数';
            result = false;
        }
        return [result, tip];
    },

    pickValue: event => {
        let res = event.target.value;
        if (canSwitchNumber(res)) {
            return +res;
        }
        return res;
    }

}
